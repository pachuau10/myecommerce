{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}Chhohreivung — Premium Shop{% endblock %}</title>

  <!-- ── SEO ──────────────────────────────────────────── -->
  <meta name="description" content="{% block meta_description %}Premium goods, crafted with intention. Shop Chhohreivung for curated fashion, accessories, and lifestyle products delivered to your door.{% endblock %}">
  <meta name="keywords" content="{% block meta_keywords %}premium shop, luxury goods, fashion, accessories, Chhohreivung{% endblock %}">
  <link rel="canonical" href="{% block canonical %}{{ request.build_absolute_uri }}{% endblock %}">

  <!-- ── Open Graph (Facebook, WhatsApp, LinkedIn) ────── -->
  <meta property="og:type"        content="{% block og_type %}website{% endblock %}">
  <meta property="og:site_name"   content="Chhohreivung">
  <meta property="og:title"       content="{% block og_title %}Chhohreivung — Premium Shop{% endblock %}">
  <meta property="og:description" content="{% block og_description %}Premium goods, crafted with intention. Shop Chhohreivung for curated fashion, accessories, and lifestyle products delivered to your door.{% endblock %}">
  <meta property="og:url"         content="{% block og_url %}{{ request.build_absolute_uri }}{% endblock %}">
  <meta property="og:image"       content="{% block og_image %}https://res.cloudinary.com/dqquazig1/image/upload/v1771701592/chhohhreivung_tmkq5m.jpg{% endblock %}">
  <meta property="og:image:width"  content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:locale"      content="en_US">

  <!-- ── Twitter Card ─────────────────────────────────── -->
  <meta name="twitter:card"        content="summary_large_image">
  <meta name="twitter:site"        content="@chhohreivung">
  <meta name="twitter:title"       content="{% block twitter_title %}Chhohreivung — Premium Shop{% endblock %}">
  <meta name="twitter:description" content="{% block twitter_description %}Premium goods, crafted with intention. Shop Chhohreivung for curated fashion, accessories, and lifestyle products.{% endblock %}">
  <meta name="twitter:image"       content="{% block twitter_image %}https://res.cloudinary.com/dqquazig1/image/upload/v1771701592/chhohhreivung_tmkq5m.jpg{% endblock %}">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  {% block extra_css %}{% endblock %}
  <script>
    // Apply saved theme before render to avoid flash
    (function() {
      const t = localStorage.getItem('luxe-theme') || 'light';
      document.documentElement.setAttribute('data-theme', t);
    })();
  </script>
</head>
<body>

<!-- Announcement Bar -->
<div class="announcement-bar">
  <span>Free shipping on orders over $100 &nbsp;·&nbsp; Use code <strong>Chho20</strong> for 20% off</span>
</div>

<!-- Navigation -->
<nav class="navbar">
  <div class="nav-inner">
    <div class="nav-links-left">
      <a href="{% url 'store:product_list' %}">Shop</a>
      <a href="{% url 'store:product_list' %}?sort=newest">New</a>
      <a href="{% url 'store:product_list' %}?sort=price_asc">Sale</a>
    </div>

    <a href="{% url 'store:home' %}" class="nav-logo">CHHOHREIVUNG</a>

    <div class="nav-actions">
      <!-- Theme Toggle -->
      <button class="theme-toggle" id="themeToggle" title="Toggle theme" aria-label="Toggle dark mode">
        <svg class="icon-moon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
        <svg class="icon-sun" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
      </button>

      <a href="{% url 'store:product_list' %}" class="nav-icon" title="Search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
      </a>
      {% if user.is_authenticated %}
      <a href="{% url 'store:wishlist' %}" class="nav-icon" title="Wishlist">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
      </a>
      <a href="{% url 'store:profile' %}" class="nav-icon" title="Profile">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </a>
      {% else %}
      <a href="{% url 'store:login' %}" class="nav-icon" title="Sign In">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </a>
      {% endif %}
      <a href="{% url 'store:cart' %}" class="nav-icon cart-icon" title="Cart">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
        {% if cart_count > 0 %}<span class="cart-badge">{{ cart_count }}</span>{% endif %}
      </a>

      <!-- Mobile hamburger -->
      <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Open menu">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
      </button>
    </div>
  </div>
</nav>

<!-- Mobile Menu -->
<div class="mobile-menu" id="mobileMenu" role="dialog" aria-modal="true">
  <div class="mobile-menu-header">
    <span class="nav-logo" style="position:static;transform:none;">Chhohreivung</span>
    <button class="mobile-menu-close" id="mobileMenuClose" aria-label="Close menu">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>
  </div>

  <a href="{% url 'store:product_list' %}" class="mobile-nav-link">Shop</a>
  <a href="{% url 'store:product_list' %}?sort=newest" class="mobile-nav-link">New Arrivals</a>
  <a href="{% url 'store:product_list' %}?sort=price_asc" class="mobile-nav-link">Sale</a>
  <a href="{% url 'store:cart' %}" class="mobile-nav-link">Cart {% if cart_count > 0 %}({{ cart_count }}){% endif %}</a>
  {% if user.is_authenticated %}
  <a href="{% url 'store:wishlist' %}" class="mobile-nav-link">Wishlist</a>
  <a href="{% url 'store:profile' %}" class="mobile-nav-link">Profile</a>
  <a href="{% url 'store:order_list' %}" class="mobile-nav-link">Orders</a>
  <a href="{% url 'store:logout' %}" class="mobile-nav-link" style="color:var(--text-dim);">Sign Out</a>
  {% else %}
  <a href="{% url 'store:login' %}" class="mobile-nav-link">Sign In</a>
  <a href="{% url 'store:register' %}" class="mobile-nav-link">Create Account</a>
  {% endif %}
</div>

<!-- Messages -->
{% if messages %}
<div class="messages-container">
  {% for message in messages %}
  <div class="flash-message flash-{{ message.tags }}">
    {{ message }}
    <button onclick="this.parentElement.remove()" class="flash-close">×</button>
  </div>
  {% endfor %}
</div>
{% endif %}

<!-- Main Content -->
<main>
  {% block content %}{% endblock %}
</main>

<!-- Footer -->
<footer class="footer">
  <div class="footer-inner">
    <div class="footer-brand">
      <div class="footer-logo">Chhohreivung</div>
      <p>Premium goods, crafted with intention.<br>Delivered to your door.</p>
    </div>
    <div class="footer-col">
      <h4>Shop</h4>
      <a href="{% url 'store:product_list' %}">All Products</a>
      <a href="{% url 'store:product_list' %}?sort=newest">New Arrivals</a>
      <a href="{% url 'store:product_list' %}?sort=price_asc">Best Value</a>
    </div>
    <div class="footer-col">
      <h4>Account</h4>
      {% if user.is_authenticated %}
      <a href="{% url 'store:profile' %}">My Profile</a>
      <a href="{% url 'store:order_list' %}">Orders</a>
      <a href="{% url 'store:wishlist' %}">Wishlist</a>
      <a href="{% url 'store:logout' %}">Sign Out</a>
      {% else %}
      <a href="{% url 'store:login' %}">Sign In</a>
      <a href="{% url 'store:register' %}">Create Account</a>
      {% endif %}
    </div>
    <div class="footer-col">
      <h4>Help</h4>
      <a href="#">Shipping Info</a>
      <a href="#">Returns</a>
      <a href="#">FAQ</a>
      <a href="#">Contact Us</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2026 Chhohreivung. All rights reserved.</p>
  </div>
</footer>

<script src="{% static 'js/main.js' %}"></script>
{% block extra_js %}{% endblock %}
</body>
</html>